<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.member.model.mapper.MemberMapper">

    <!-- 이메일 중복 체크 -->
    <select id="checkEmail">
        SELECT COUNT(*) FROM MEMBER
        WHERE MEMBER_EMAIL = #{email}
    </select>

    <!-- 이메일로 아이디 찾기 -->
    <select id="findId" resultType="string">
        SELECT MEMBER_ID
        FROM MEMBER
        WHERE MEMBER_EMAIL = #{email}
    </select>

    <!-- 로그인 처리 -->
    <select id="login" parameterType="map" resultType="com.example.demo.member.model.vo.Member">
        SELECT * FROM MEMBER
        WHERE MEMBER_EMAIL = #{memberEmail} 
          AND MEMBER_PWD = #{memberPwd} 
          AND MEMBER_STATUS = 'A'
    </select>

    <!-- 회원가입 쿼리 -->
    <insert id="insertMember" parameterType="com.example.demo.member.model.vo.Member">
        INSERT INTO MEMBER (
            MEMBER_ID, MEMBER_PWD, MEMBER_GENDER, MEMBER_PHONE, MEMBER_EMAIL, 
            MEMBER_NICKNAME, MEMBER_STATUS, IS_ADMIN, MEMBER_BIRTH, MEMBER_CREATEDATE
        )
        VALUES (
        #{memberId}, #{memberPwd}, #{memberGender}, #{memberPhone}, #{memberEmail}, #{memberNickname}, #{memberStatus}, #{memberIsAdmin}, #{memberBirth}, SYSDATE)
        )
    </insert>

</mapper>
